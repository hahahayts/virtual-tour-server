generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id         String       @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  created_at DateTime     @default(now()) @db.Timestamptz(6)
  updated_at DateTime     @default(now()) @db.Timestamptz(6)
  deleted_at DateTime?    @db.Timestamptz(6)
  first_name String?
  last_name  String?
  email      String       @unique
  role       UserRoleType @default(ADMIN)

  @@index([created_at])
  @@index([updated_at])
  @@index([deleted_at])
  @@index([first_name])
  @@index([last_name])
  @@index([email])
}

model Account {
  id            String         @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  created_at    DateTime       @default(now()) @db.Timestamptz(6)
  updated_at    DateTime       @default(now()) @db.Timestamptz(6)
  deleted_at    DateTime?      @db.Timestamptz(6)
  email         String         @unique
  password      String
  refresh_token RefreshToken[]
}

model RefreshToken {
  id         String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  token      String
  created_at DateTime  @default(now()) @db.Timestamptz(6)
  updated_at DateTime  @default(now()) @db.Timestamptz(6)
  deleted_at DateTime? @db.Timestamptz(6)
  account_id String    @db.Uuid
  account    Account   @relation(fields: [account_id], references: [id], onDelete: Cascade)

  @@index([token])
}

model Task {
  id          String   @id @default(uuid())
  name        String
  description String
  completed   Boolean
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Destination {
  id                   String              @id @default(cuid())
  name                 String              @db.VarChar(255)
  description          String
  transpo_info         String
  email                String?             @db.VarChar(320)
  phone                String?             @db.VarChar(20)
  website              String?             @db.VarChar(2048)
  facebook             String?             @db.VarChar(255)
  address              String?
  latitude             Float?
  longitude            Float?
  three_sixty_imageUrl String?             @db.VarChar(2048)
  imageUrl_1           String?             @db.VarChar(2048)
  imageUrl_2           String?             @db.VarChar(2048)
  imageUrl_3           String?             @db.VarChar(2048)
  imageUrl_4           String?             @db.VarChar(2048)
  imageUrl_5           String?             @db.VarChar(2048)
  videoUrl             String?             @db.VarChar(2048)
  count                Int?                @default(0)
  createdAt            DateTime            @default(now())
  updatedAt            DateTime            @updatedAt
  deletedAt            DateTime?
  visits               DestinationVisits[]
  ratings              Rating[]

  @@index([name])
  @@index([email])
  @@index([latitude, longitude])
}

model Accommodation {
  id                   String            @id @default(cuid())
  name                 String            @db.VarChar(255)
  description          String
  type                 AccommodationType
  email                String?           @db.VarChar(320)
  phone                String?           @db.VarChar(20)
  website              String?           @db.VarChar(2048)
  facebook             String?           @db.VarChar(255)
  address              String?
  latitude             Float?
  longitude            Float?
  three_sixty_imageUrl String?           @db.VarChar(2048)
  imageUrl_1           String?           @db.VarChar(2048)
  imageUrl_2           String?           @db.VarChar(2048)
  imageUrl_3           String?           @db.VarChar(2048)
  imageUrl_4           String?           @db.VarChar(2048)
  imageUrl_5           String?           @db.VarChar(2048)
  videoUrl             String?           @db.VarChar(2048)
  createdAt            DateTime          @default(now())
  updatedAt            DateTime          @updatedAt
  deletedAt            DateTime?

  @@index([name])
  @@index([email])
  @@index([latitude, longitude])
}

model WaterTransportation {
  id                      String    @id @default(cuid())
  name                    String    @db.VarChar(255)
  description             String
  guidelines_and_policies String
  rebooking_supercharges  String
  refund_policy           String
  duration                Int?      @default(0)
  expected_fee            Float
  departure_days          Json
  departure_time          String
  imageUrl_1              String?   @db.VarChar(2048)
  imageUrl_2              String?   @db.VarChar(2048)
  imageUrl_3              String?   @db.VarChar(2048)
  createdAt               DateTime  @default(now())
  updatedAt               DateTime  @updatedAt
  deletedAt               DateTime?

  @@index([name])
}

model Restaurant {
  id                   String    @id @default(cuid())
  name                 String    @db.VarChar(255)
  description          String
  address              String?
  latitude             Float?
  longitude            Float?
  email                String?   @db.VarChar(320)
  phone                String?   @db.VarChar(20)
  website              String?   @db.VarChar(2048)
  facebook             String?   @db.VarChar(255)
  three_sixty_imageUrl String?   @db.VarChar(2048)
  imageUrl_1           String?   @db.VarChar(2048)
  imageUrl_2           String?   @db.VarChar(2048)
  imageUrl_3           String?   @db.VarChar(2048)
  imageUrl_4           String?   @db.VarChar(2048)
  imageUrl_5           String?   @db.VarChar(2048)
  videoUrl             String?   @db.VarChar(2048)
  createdAt            DateTime  @default(now())
  updatedAt            DateTime  @updatedAt
  deletedAt            DateTime?

  @@index([name])
}

model LandTransportation {
  id             String    @id @default(cuid())
  name           String    @db.VarChar(100)
  description    String
  vehicleType    String?   @db.VarChar(50)
  capacity       Int?
  operator       String?
  contactNumber  String?
  baseFee        Float?
  feeDescription String?
  imageUrl_1     String?   @db.VarChar(2048)
  imageUrl_2     String?   @db.VarChar(2048)
  imageUrl_3     String?   @db.VarChar(2048)
  createdAt      DateTime  @default(now())
  updatedAt      DateTime  @updatedAt
  deletedAt      DateTime?

  @@index([name])
}

model History {
  id          String    @id @default(cuid())
  name        String    @db.VarChar(255)
  description String
  imageUrl_1  String?   @db.VarChar(2048)
  imageUrl_2  String?   @db.VarChar(2048)
  imageUrl_3  String?   @db.VarChar(2048)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  deletedAt   DateTime?
}

model About {
  id          Int       @id @default(autoincrement())
  name        String    @db.VarChar(255)
  description String
  imageUrl_1  String?   @db.VarChar(2048)
  imageUrl_2  String?   @db.VarChar(2048)
  imageUrl_3  String?   @db.VarChar(2048)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  deletedAt   DateTime?
}

model Rating {
  id            String       @id @default(cuid())
  score         Int
  comment       String?
  mac_address   String?      @db.VarChar(17)
  is_display    Boolean      @default(false)
  destinationId String?
  createdAt     DateTime     @default(now())
  updatedAt     DateTime     @updatedAt
  destination   Destination? @relation(fields: [destinationId], references: [id], onDelete: Cascade)

  @@unique([mac_address, destinationId])
}

model Visit {
  id         Int      @id @default(autoincrement())
  macAddress String
  month      String
  year       Int
  visitCount Int      @default(1)
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@unique([macAddress, month, year])
}

model DestinationVisits {
  id            Int         @id @default(autoincrement())
  macAddress    String
  month         String
  year          Int
  visitCount    Int         @default(1)
  destinationId String
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
  destination   Destination @relation(fields: [destinationId], references: [id])

  @@unique([macAddress, month, year, destinationId])
}

enum AccommodationType {
  HOTEL
  RESORT
  INN
  APARTMENT
}

enum UserRoleType {
  SUPER_ADMIN
  ADMIN
  USER
}
